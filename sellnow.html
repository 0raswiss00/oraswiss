<!doctype html>
<html lang="sq">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shto orÃ« (sell now)</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="admin.css">
 
<style>
  body{font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;margin:0;padding:20px}
  .wrap{max-width:900px;margin:0 auto}
  .top{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:820px){.row{grid-template-columns:1fr}}
  label{display:block;margin:12px 0 6px;color:#ddd}
  input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #333;background:#111;color:#fff}
  textarea{min-height:90px}
  .btn{margin-top:14px;padding:12px 14px;border-radius:12px;border:1px solid #2a2a2a;background:#0f0f0f;color:#fff;cursor:pointer}
  .btn:hover{background:#1a1a1a}
  .note{opacity:.85;font-size:13px;margin-top:8px;line-height:1.4}
  .ok{color:#25D366}
  .bad{color:#ff6b6b}

  /* extra */
  body { padding: 16px; font-family: system-ui, -apple-system, BlinkMacSystemFont; }
  .btn { padding: 14px 18px; font-size: 16px; border-radius: 8px; }
  #photosPreview img { width: 120px; height: auto; margin: 8px; border-radius: 6px; }

  .logo-center{
    display:flex;
    justify-content:center;
    margin: 10px 0 30px;
  }
  .logo-center img{
    height: 200px;
  }
</style>
    
     
</head>

<body class="sell-page">
<div class="wrap">

  <!-- âœ… LOGO NÃ‹ MES (SIPÃ‹R) -->
  <div class="logo-center">
    <img src="images/oraswiss-logo.png" alt="OraSwiss Logo">
  </div>

  <div class="top">
    <h2 style="margin:0">Shto orÃ« (sell now)</h2>
    <button class="btn" type="button" onclick="history.back()">â† Back</button>
  </div>

  <div class="note">
    1) Kliko <b>Upload Photos</b> (ngarkon fotot dhe mbush automatikisht URL-tÃ«)<br/>
    2) PlotÃ«so fushat<br/>
    3) Kliko <b>PUBLISH</b> â†’ shkon nÃ« Supabase me status <b>pending</b>
  </div>

  <label>Category</label>
  <select id="category">
    <option value="luxury">Luxury</option>
    <option value="vintage" selected>Vintage</option>
    <option value="parts">Parts</option>
  </select>

  <div class="row">
    <div><label>Brand</label><input id="brand" placeholder="Omega"></div>
    <div><label>Model</label><input id="model" placeholder="Seamaster"></div>
  </div>

  <div class="row">
    <div><label>Ref</label><input id="ref" placeholder="2400-4"></div>
    <div><label>Year</label><input id="year" type="number" placeholder="1999"></div>
  </div>

  <div class="row">
    <div><label>Material</label><input id="material" placeholder="Steel"></div>
    <div><label>Case Size (mm)</label><input id="case_size" type="number" placeholder="35"></div>
  </div>

  <div class="row">
    <div>
      <label>Condition</label>
      <select id="condition">
        <option>New</option>
        <option>Like New</option>
        <option selected>Very Good</option>
        <option>Good</option>
        <option>Used - Fair</option>
      </select>
    </div>
    <div><label>Price (â‚¬)</label><input id="price" type="number" placeholder="900"></div>
  </div>

  <div class="row">
    <div>
      <label>Box & Papers</label>
      <select id="box">
        <option value="">Nuk e di</option>
        <option value="fullset">Box & Papers</option>
        <option value="box_only">VetÃ«m Box</option>
        <option value="papers_only">VetÃ«m Papers</option>
        <option value="none">Pa Box / Papers</option>
      </select>
    </div>
    <div>
      <label>Working</label>
      <select id="working">
        <option value="">Nuk e di</option>
        <option value="working">Working</option>
        <option value="not_working">Not working</option>
      </select>
    </div>
  </div>

<label>Description</label>
<textarea id="description" placeholder="Shkruaj pÃ«rshkrimin..."></textarea>
  

<!-- BUTONAT -->
<div id="actions">
  <button id="chooseBtn" type="button">Zgjidh Foto</button>
  <button id="uploadBtn" type="button">NGARKO FOTOT</button>
  <button id="publishBtn" type="button">PUBLISH</button>
</div>

<div id="msg"></div>

<div id="photosPreview"></div>


<input
  id="photoFiles"
  type="file"
  accept="image/*"
  multiple
  style="display:none"
/>

<div id="msg" style="margin-top:10px;"></div>

<script>
(() => {
  function desc(el){
    if(!el) return "null";
    const id = el.id ? "#"+el.id : "";
    const cls = el.className ? "."+String(el.className).trim().split(/\s+/).join(".") : "";
    return el.tagName + id + cls;
  }

  function isFullScreenBlocker(el){
    const st = getComputedStyle(el);
    if (st.pointerEvents === "none") return false;
    if (st.display === "none" || st.visibility === "hidden") return false;

    const posOk = (st.position === "fixed" || st.position === "absolute");
    if (!posOk) return false;

    const r = el.getBoundingClientRect();
    const covers =
      r.width >= window.innerWidth - 5 &&
      r.height >= window.innerHeight - 5 &&
      r.left <= 2 && r.top <= 2;

    if (!covers) return false;

    const z = Number(st.zIndex);
    if (!Number.isFinite(z)) return true; // z-index:auto por fixed fullscreen prap mund tÃ« bllokojÃ«
    return z >= 10;
  }

  function findBlockers(){
    const all = Array.from(document.querySelectorAll("body *"));
    const blockers = all.filter(isFullScreenBlocker);

    blockers.sort((a,b) => {
      const za = Number(getComputedStyle(a).zIndex); 
      const zb = Number(getComputedStyle(b).zIndex);
      return (Number.isFinite(zb)?zb:0) - (Number.isFinite(za)?za:0);
    });

    console.log("FULLSCREEN BLOCKERS:", blockers.map(desc));
    return blockers;
  }

  function disable(el){
    el.style.pointerEvents = "none";
    el.style.display = "none";
    el.style.visibility = "hidden";
  }

  window.addEventListener("load", () => {
    // 1) Gjej bllokuesit fullscreen
    const blockers = findBlockers();

    // 2) Trego Ã§farÃ« Ã«shtÃ« sipÃ«r butonit PUBLISH
    const btn = document.getElementById("publishBtn");
    if (btn) {
      const r = btn.getBoundingClientRect();
      const topEl = document.elementFromPoint(r.left + 5, r.top + 5);
      console.log("ON TOP OF #publishBtn:", desc(topEl), topEl);

      // 3) NÃ«se sâ€™Ã«shtÃ« vet butoni, Ã§aktivizo elementin sipÃ«r
      if (topEl && topEl !== btn) {
        console.warn("DISABLING TOP ELEMENT:", desc(topEl));
        disable(topEl);
        alert("E gjeta Ã§farÃ« e bllokonte: " + desc(topEl) + " â€” e Ã§aktivizova. Provo tani butonat.");
      }
    }

    // 4) NÃ«se ka blockers, Ã§aktivizo tÃ« parin (mÃ« shpesh mjafton)
    if (blockers.length) {
      console.warn("DISABLING BLOCKER:", desc(blockers[0]));
      disable(blockers[0]);
    }
  });
})();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const chooseBtn = document.getElementById("chooseBtn");
  const uploadBtn = document.getElementById("uploadBtn");
  const publishBtn = document.getElementById("publishBtn");
  const fileInput = document.getElementById("photoFiles");
  const msg = document.getElementById("msg");
  const preview = document.getElementById("photosPreview");

  const setMsg = (t) => { if (msg) msg.textContent = t; };

  if (!chooseBtn || !uploadBtn || !publishBtn || !fileInput) {
    console.error("Mungon DOM:", { chooseBtn, uploadBtn, publishBtn, fileInput });
    return;
  }

  chooseBtn.addEventListener("click", () => fileInput.click());

  fileInput.addEventListener("change", () => {
    const n = fileInput.files ? fileInput.files.length : 0;
    setMsg(ğŸ“‚ U zgjodhÃ«n ${n} foto);

    // Preview
    if (preview) preview.innerHTML = "";
    if (preview && n > 0) {
      [...fileInput.files].slice(0, 12).forEach((f) => {
        const img = document.createElement("img");
        img.style.width = "90px";
        img.style.height = "90px";
        img.style.objectFit = "cover";
        img.style.borderRadius = "10px";
        img.style.border = "1px solid #333";
        img.src = URL.createObjectURL(f);
        img.onload = () => URL.revokeObjectURL(img.src);
        preview.appendChild(img);
      });
      if (n > 12) {
        const more = document.createElement("div");
        more.textContent = +${n - 12} mÃ« shumÃ«;
        more.style.opacity = "0.8";
        more.style.padding = "8px";
        preview.appendChild(more);
      }
    }
  });

  uploadBtn.addEventListener("click", () => {
    const n = fileInput.files ? fileInput.files.length : 0;
    if (n === 0) return setMsg("âŒ Zgjidh foto fillimisht");
    setMsg(âœ… Ke zgjedhur ${n} foto. Kliko PUBLISH pÃ«r tâ€™i ngarkuar.);
  });

  publishBtn.addEventListener("click", async () => {
    const n = fileInput.files ? fileInput.files.length : 0;
    if (n === 0) return setMsg("âŒ Zgjidh foto fillimisht");

    // Kjo Ã«shtÃ« vetÃ«m UI; kÃ«tu fut upload-in tÃ«nd real
    setMsg("â³ Duke ngarkuar fotot...");
    // ... uploadPhotos() ...
    // setMsg("âœ… Fotot u ngarkuan!");
  });
});
</script>
  

</body>
</html>
