</body>
</html>
<!doctype html>
<html lang="sq">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shto or√´ (sell now)</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="admin.css">
 
  <style>
    body{font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;margin:0;padding:20px}
    .wrap{max-width:900px;margin:0 auto}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:820px){.row{grid-template-columns:1fr}}
    label{display:block;margin:12px 0 6px;color:#ddd}
    input,select,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #333;background:#111;color:#fff}
    textarea{min-height:90px}
    .btn{margin-top:14px;padding:12px 14px;border-radius:12px;border:1px solid #2a2a2a;background:#0f0f0f;color:#fff;cursor:pointer}
    .btn:hover{background:#1a1a1a}
    .note{opacity:.85;font-size:13px;margin-top:8px;line-height:1.4}
    .ok{color:#25D366}
    .bad{color:#ff6b6b}

    <style>
      body {
        padding: 16px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont;
      }

      .btn {
        padding: 14px 18px;
        font-size: 16px;
        border-radius: 8px;
      }

      #photosPreview img {
        width: 120px;
        height: auto;
        margin: 8px;
        border-radius: 6px;
      }
    
    /* ‚úÖ LOGO N√ã MES */
    .logo-center{
      display:flex;
      justify-content:center;
      margin: 10px 0 30px;
    }
    .logo-center img{
      height: 200px; /* rrite n√´ 240px n√´se do m√´ t√´ madhe */
    }
  </style>
</head>

<body class="sell-page">
<div class="wrap">

  <!-- ‚úÖ LOGO N√ã MES (SIP√ãR) -->
  <div class="logo-center">
    <img src="images/oraswiss-logo.png" alt="OraSwiss Logo">
  </div>

  <div class="top">
    <h2 style="margin:0">Shto or√´ (sell now)</h2>
    <button class="btn" type="button" onclick="history.back()">‚Üê Back</button>
  </div>

  <div class="note">
    1) Kliko <b>Upload Photos</b> (ngarkon fotot dhe mbush automatikisht URL-t√´)<br/>
    2) Plot√´so fushat<br/>
    3) Kliko <b>PUBLISH</b> ‚Üí shkon n√´ Supabase me status <b>pending</b>
  </div>

  <label>Category</label>
  <select id="category">
    <option value="luxury">Luxury</option>
    <option value="vintage" selected>Vintage</option>
    <option value="parts">Parts</option>
  </select>

  <div class="row">
    <div><label>Brand</label><input id="brand" placeholder="Omega"></div>
    <div><label>Model</label><input id="model" placeholder="Seamaster"></div>
  </div>

  <div class="row">
    <div><label>Ref</label><input id="ref" placeholder="2400-4"></div>
    <div><label>Year</label><input id="year" type="number" placeholder="1999"></div>
  </div>

  <div class="row">
    <div><label>Material</label><input id="material" placeholder="Steel"></div>
    <div><label>Case Size (mm)</label><input id="case_size" type="number" placeholder="35"></div>
  </div>

  <div class="row">
    <div>
      <label>Condition</label>
      <select id="condition">
        <option>New</option>
        <option>Like New</option>
        <option selected>Very Good</option>
        <option>Good</option>
        <option>Used - Fair</option>
      </select>
    </div>
    <div><label>Price (‚Ç¨)</label><input id="price" type="number" placeholder="900"></div>
  </div>

  <div class="row">
    <div>
      <label>Box & Papers</label>
      <select id="box">
        <option value="">Nuk e di</option>
        <option value="fullset">Box & Papers</option>
        <option value="box_only">Vet√´m Box</option>
        <option value="papers_only">Vet√´m Papers</option>
        <option value="none">Pa Box / Papers</option>
      </select>
    </div>
    <div>
      <label>Working</label>
      <select id="working">
        <option value="">Nuk e di</option>
        <option value="working">Working</option>
        <option value="not_working">Not working</option>
      </select>
    </div>
  </div>

<label>Description</label>
<textarea id="description" placeholder="Shkruaj p√´rshkrimin..."></textarea>

<button id="uploadBtn" type="button">Upload Photos</button>

<input
  id="photoFiles"
  type="file"
  accept="image/*"
  multiple
  style="display:none"
/>

<div id="photosPreview"></div>
<div id="msg"></div>
 
<button class="btn" id="publishBtn" type="button">PUBLISH</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-auth.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-storage.js";

  // ‚úÖ Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyACmJj1OGz1gfRUjxz-w3_k94tNBfNyvVg",
  authDomain: "oraswiss-27e57.firebaseapp.com",
  projectId: "oraswiss-27e57",
  storageBucket: "oraswiss-27e57.appspot.com",
  messagingSenderId: "596627676936",
  appId: "1:596627676936:web:0c96cf820fef4e979616bd",
  measurementId: "G-VZPKMD67VQ"
};



  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // ‚úÖ ELEMENTS (vet√´m 1 her√´)
const uploadBtn = document.getElementById("uploadBtn");
const fileInput = document.getElementById("photoFiles");
const photosBox = document.getElementById("photos");
const photosPreview = document.getElementById("photosPreview");
const publishBtn = document.getElementById("publishBtn");
const msgEl = document.getElementById("msg");

// MSG
const msg = (t, ok = true) => {
  msgEl.className = "note " + (ok ? "ok" : "bad");
  msgEl.textContent = t;
};

// OPEN PICKER
uploadBtn.addEventListener("click", () => {
  fileInput.click();
});

// UPLOAD (vet√´m preview + ruan URL-t√´)
fileInput.addEventListener("change", async () => {
  const files = Array.from(fileInput.files || []);
  if (!files.length) return;

  photosPreview.innerHTML = "";
  const urls = [];

  for (const file of files) {
    const url = URL.createObjectURL(file);
    urls.push(url);
    photosPreview.innerHTML += <img src="${url}" style="max-width:120px;margin:6px;border-radius:8px">;
  }

  photosBox.value = urls.join("\n");
  msg(U zgjodh√´n ${urls.length} foto ‚úÖ, true);

  fileInput.value = "";
});

const uploadBtn = document.getElementById("uploadBtn");
const fileInput = document.getElementById("photoFiles");
const preview = document.getElementById("photosPreview");
const msg = document.getElementById("msg");

uploadBtn.onclick = () => fileInput.click();

fileInput.onchange = async () => {
  const files = Array.from(fileInput.files);
  if (!files.length) return;

  preview.innerHTML = "";
  msg.textContent = "Uploading...";

  try {
    for (const file of files) {
      const fileRef = ref(
        storage,
        photos/${Date.now()}_${file.name}
      );

      // ‚¨ÜÔ∏è UPLOAD REAL
      await uploadBytes(fileRef, file);

      // üîó URL REAL NGA FIREBASE
      const url = await getDownloadURL(fileRef);

      // üëÄ PREVIEW
      const img = document.createElement("img");
      img.src = url;
      img.style.width = "120px";
      img.style.margin = "6px";
      preview.appendChild(img);

      console.log("Uploaded:", url);
    }

    msg.textContent = "Fotot u ngarkuan ‚úÖ";
  } catch (e) {
    console.error(e);
    msg.textContent = "Gabim n√´ upload ‚ùå";
  }

  fileInput.value = "";
};
</script> 
</body>
</html>


