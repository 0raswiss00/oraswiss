<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vintage Watches</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin: 0;
  padding: 20px;
  background: #0b0b0b;
  color: #fff;
  font-family: Arial, sans-serif;
}
h1 { margin-bottom: 20px; }

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 20px;
}

.card {
  background: #151515;
  border-radius: 10px;
  overflow: hidden;
}

.card img.main {
  width: 100%;
  height: 260px;
  object-fit: cover;
}

.thumbs {
  display: flex;
  gap: 6px;
  padding: 8px;
}
.thumbs img {
  width: 50px;
  height: 50px;
  object-fit: cover;
  cursor: pointer;
  opacity: 0.7;
}
.thumbs img:hover { opacity: 1; }

.panel {
  padding: 12px;
}
.panel h3 { margin: 0 0 6px; }
.panel p { margin: 4px 0; font-size: 14px; }
</style>
</head>

<body>

<h1>Vintage Watches</h1>

<div id="list" class="grid"></div>

<script>
const JSON_URL = "watches.json";
const CATEGORY = "vintage";

const list = document.getElementById("list");

function render(items) {
  const filtered = items.filter(p =>
    (p.cat || "").toLowerCase() === CATEGORY
  );

  if (!filtered.length) {
    list.innerHTML = "<p>No products found.</p>";
    return;
  }

  list.innerHTML = filtered.map(p => {
    const photos = Array.isArray(p.photos) ? p.photos : [];
    const main = photos[0] || "";

    return `
      <section class="card">
        <img class="main" src="${main}">
        <div class="thumbs">
          ${photos.map(ph => <img src="${ph}" onclick="this.closest('.card').querySelector('.main').src='${ph}'">).join("")}
        </div>
        <div class="panel">
          <h3>${p.brand} ${p.model}</h3>
          <p>Ref: ${p.ref}</p>
          <p>Year: ${p.year}</p>
          <p>Condition: ${p.condition}</p>
          <p><b>${p.price}</b></p>
        </div>
      </section>
    `;
  }).join("");
}

async function load() {
  try {
    const res = await fetch(JSON_URL + "?v=" + Date.now(), { cache: "no-store" });
    if (!res.ok) throw new Error(res.status);
    const data = await res.json();
    render(data);
  } catch (e) {
    list.innerHTML = "<p>Error loading products.</p>";
    console.error(e);
  }
}

load();
</script>

</body>
</html>

